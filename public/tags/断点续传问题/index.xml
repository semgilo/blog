<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>断点续传问题 on 蓝胡子</title>
    <link>http://www.lanhuzi.com/tags/%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E9%97%AE%E9%A2%98/</link>
    <description>Recent content in 断点续传问题 on 蓝胡子</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Tue, 12 Jan 2021 10:28:00 +0800</lastBuildDate><atom:link href="http://www.lanhuzi.com/tags/%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E9%97%AE%E9%A2%98/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>cocos2dx downloader 断点续传问题</title>
      <link>http://www.lanhuzi.com/cocos2dx_downloader_resume_issue/</link>
      <pubDate>Tue, 12 Jan 2021 10:28:00 +0800</pubDate>
      
      <guid>http://www.lanhuzi.com/cocos2dx_downloader_resume_issue/</guid>
      <description>问题描述 下载过程中突然切换 4G 到 wifi 或者不同 wifi 切换时候，会导致下载后的文件异常
问题分析 Android的Downloader是通过requst header来实现断点续传 // 在Cocos2dxDownloader里面createTask里面 if (supportResuming &amp;amp;&amp;amp; fileLen &amp;gt; 0) { // continue download  List&amp;lt;Header&amp;gt; list = new ArrayList&amp;lt;Header&amp;gt;(); list.add(new BasicHeader(&amp;#34;Range&amp;#34;, &amp;#34;bytes=&amp;#34; + fileLen + &amp;#34;-&amp;#34;)); headers = list.toArray(new Header[list.size()]); } 当切换网络的时候依旧是使用旧的header数据，缓存文件也没有还原，导致下载的最终数据比原数据大 解决方案 修改重连次数为0 public static Cocos2dxDownloader createDownloader(int id, int timeoutInSeconds, String tempFileNameSufix, int countOfMaxProcessingTasks) { Cocos2dxDownloader downloader = new Cocos2dxDownloader(); downloader._id = id; downloader._httpClient.setEnableRedirects(true); if (timeoutInSeconds &amp;gt; 0) { downloader.</description>
    </item>
    
  </channel>
</rss>
